<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.woniu.dao.StudentDao">


    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
        insert into student(name, phone_number)
        values (#{student.name}, #{student.phoneNumber})
    </insert>

    <insert id="insertPhoneKeyworkds">
       insert into sys_person_phone_encrypt(person_id,phone_key)
       values (#{persondId},#{phoneKeywords})
    </insert>


    <select id="getByPhoneNumber" resultType="com.woniu.entity.Student">
        select id,name, phone_number as phoneNumber
         from student where id in
        (select person_id from sys_person_phone_encrypt
         where phone_key like concat('%',#{phoneNumberEncrypt},'%'))
    </select>

</mapper>